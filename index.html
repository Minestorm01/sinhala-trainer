<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Sinhala Trainer</title>
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
         max-width:700px;margin:0 auto;padding:16px;line-height:1.45}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
    h1{font-size:1.6rem;margin:0}
    .hud{display:flex;gap:12px;align-items:center}
    .muted{color:#888}
    .xpbar{height:8px;background:#eee;border-radius:6px;overflow:hidden;min-width:150px}
    .xpfill{height:100%;width:0;background:#6dd76d;transition:width .3s ease}
    .si{font-size:1.8rem;margin:.25rem 0}
    .en{color:#666}
    .hint{color:#999;font-size:.9rem}
    .row{display:flex;gap:8px;flex-wrap:wrap;margin:.6rem 0}
    button{padding:.7rem 1rem;border:1px solid #ddd;border-radius:10px;cursor:pointer;background:#fff}
    button:disabled{opacity:.5;cursor:not-allowed}
    textarea{width:100%;padding:.7rem;border:1px solid #ddd;border-radius:10px}
    .score{font-weight:700}
    .chip{padding:.25rem .5rem;border-radius:999px;border:1px solid #ddd}
    .g{background:#e8f8ec;border-color:#c5e8cf}
    .a{background:#fff7e6;border-color:#ffe0a3}
    .r{background:#ffecec;border-color:#ffb3b3}
  </style>
</head>
<body>
  <header>
    <h1>Sinhala Trainer</h1>
    <div class="hud">
      <div id="hearts"></div>
      <div>
        <div class="xpbar"><div id="xpfill" class="xpfill"></div></div>
        <div class="muted" style="font-size:.8rem">
          <span id="xplabel">0 / 100 XP</span> â€¢ Lv <span id="level">1</span> â€¢ ğŸ”¥ <span id="streak">0</span>
        </div>
      </div>
    </div>
  </header>

  <p class="en">Listen â†’ speak â†’ score. Finish without losing all hearts.</p>

  <div id="card">
    <div class="en" id="prompt_en"></div>
    <div class="si" id="prompt_si"></div>
    <div class="hint" id="hint"></div>
  </div>

  <div class="row">
    <button id="btnMic">ğŸ™ï¸ Speak</button>
    <button id="btnPlay">â–¶ï¸ Play</button>
    <button id="btnSlow">ğŸ¢ Slow</button>
    <button id="btnNext">Next â†’</button>
  </div>

  <label for="heard" class="muted">Manual/backup: paste or type Sinhala here</label>
  <textarea id="heard" rows="2" placeholder="Paste Sinhala here if neededâ€¦"></textarea>

  <div class="row">
    <button id="btnOpenGT">ğŸŒ Open Google Translate</button>
    <button id="btnPasteCheck">ğŸ“‹ Paste & Check</button>
  </div>

  <div class="row">
    <button id="btnCheck">âœ… Check</button>
    <div id="score" class="score"></div>
  </div>

  <div id="wordFeedback" class="row"></div>

  <script src="app.js"></script>
</body>
</html>
