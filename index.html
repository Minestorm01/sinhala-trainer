<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Sinhala Trainer</title>
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <style><!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Sinhala Trainer</title>
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <style>
    :root {
      --bg:#0f1720; --card:#121a24; --ink:#e8f0f8; --muted:#9bb0c3;
      --accent:#69f58b; --accent2:#8cd0ff; --danger:#ff6b6b;
    }
    * { box-sizing:border-box }
    body { font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
           margin:0; background:var(--bg); color:var(--ink) }
    main { max-width:900px; margin:0 auto; padding:16px }
    header { display:flex; align-items:center; justify-content:space-between; padding:12px 16px;
             position:sticky; top:0; background:linear-gradient(180deg,var(--bg) 80%,transparent); z-index:2 }
    h1 { font-size:1.2rem; margin:0 }
    .hud { display:flex; gap:12px; align-items:center }
    .muted { color:var(--muted) }
    .xpbar { height:8px; background:#1b2632; border-radius:6px; overflow:hidden; min-width:150px }
    .xpfill { height:100%; width:0; background:var(--accent); transition:width .3s ease }
    .view { display:none }
    .view.active { display:block }
    .section { margin:18px 0 8px; font-weight:700; color:#cfe6ff }
    .grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(110px,1fr)); gap:16px }
    .node { position:relative; border-radius:16px; padding:16px; background:#162230; border:1px solid #1f3044;
            box-shadow:0 6px 0 #0d141c; cursor:pointer; text-align:center }
    .node .big { font-size:32px; display:block }
    .node .title { color:var(--muted); font-size:.9rem; margin-top:6px }
    .node.lock { opacity:.45; filter:grayscale(1); cursor:not-allowed }
    .node.done { background:#1b2b21; border-color:#2e513d }
    .row { display:flex; gap:8px; flex-wrap:wrap; margin:.6rem 0 }
    button { padding:.7rem 1rem; border:1px solid #2a3b50; border-radius:10px;
             cursor:pointer; background:#101827; color:#e8f0f8 }
    textarea { width:100%; padding:.7rem; border:1px solid #2a3b50; border-radius:10px;
               background:#0e1621; color:#dfe8f2 }
    .score { font-weight:700 }
    .chip { padding:.25rem .5rem; border-radius:999px; border:1px solid #345060 }
    .g { background:#173423; border-color:#2c6d4b }
    .a { background:#3a2b12; border-color:#7a5b1b }
    .r { background:#3c1515; border-color:#a33b3b }
    .card { background:var(--card); border:1px solid #1e2b39; border-radius:16px; padding:14px; margin:10px 0 }
    .si { font-size:1.8rem; margin:.25rem 0 }
    .en { color:#bcd0e6 }
    .hint { color:#8aa6bf; font-size:.9rem }
    .topbar-btn { border-radius:999px; padding:.5rem .8rem }
    .back { color:#bcd0e6; text-decoration:none }
  </style>
</head>
<body>
  <header>
    <h1><a class="back" href="#/home" id="navHome">Sinhala Trainer</a></h1>
    <div class="hud">
      <div id="hearts"></div>
      <div>
        <div class="xpbar"><div id="xpfill" class="xpfill"></div></div>
        <div class="muted" style="font-size:.8rem">
          <span id="xplabel">0 / 100 XP</span> ‚Ä¢ Lv <span id="level">1</span> ‚Ä¢ üî• <span id="streak">0</span>
        </div>
      </div>
      <button id="resetHearts" class="topbar-btn">üíÄ Reset</button>
    </div>
  </header>

  <main>
    <!-- Home view -->
    <section id="home" class="view active">
      <div class="section">Section 1</div>
      <div id="homeGrid" class="grid"></div>
    </section>

    <!-- Lesson view -->
    <section id="lesson" class="view">
      <div class="card">
        <div class="en" id="prompt_en"></div>
        <div class="si" id="prompt_si"></div>
        <div class="hint" id="hint"></div>
      </div>

      <div class="row">
        <button id="btnMic">üéôÔ∏è Speak</button>
        <button id="btnPlay">‚ñ∂Ô∏è Play</button>
        <button id="btnSlow">üê¢ Slow</button>
        <button id="btnNext">Next ‚Üí</button>
      </div>

      <label for="heard" class="muted">Manual/backup: paste or type Sinhala here</label>
      <textarea id="heard" rows="2"></textarea>

      <div class="row">
        <button id="btnOpenGT">üåê Open Google Translate</button>
        <button id="btnPasteCheck">üìã Paste & Check</button>
      </div>

      <div class="row">
        <button id="btnCheck">‚úÖ Check</button>
        <div id="score" class="score"></div>
      </div>

      <div id="wordFeedback" class="row"></div>

      <div class="row">
        <a href="#/home" id="backHome" class="topbar-btn">‚Üê Back to Path</a>
      </div>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
